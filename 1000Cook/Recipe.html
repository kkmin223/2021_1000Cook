<!DOCTYPE html>
<html lang="kr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="main.css">
    <link rel="stylesheet" type="text/css" href="recipe_kind.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
         <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="recipelist.css">
    <script type="text/javascript" src="recipelist.js"></script>
    <script type="text/javascript" src="recipe_data\recipe_info.json"></script>
    <script type="text/javascript" src="recipe_data\recipe_material.json"></script>
      <script type="text/javascript" src="recipe_data\material_index.json"></script>
    <title>1000Cook</title>
  </head>
  <body>
    <div class="container-fluid z">
<div class=" container header">
  <div class="logo" style="width:20%">
    <img src="pic\1000Cook_.png" style="width:75%;">
  </div>
  <div class="menu"style="width:60%">
    <div class="menu-items"style="width:20%;">
      <div class="menu-items-pic text-center" style="height:60%"><img src="pic\recipe.png" style="width:30% "></div>
      <div class="menu-items-exp text-center"style="height:40%"><a href="main.html">종류별</a></div>
    </div>
    <div class="menu-items"style="width:20%;">
      <div class="menu-items-pic text-center" style="height:60%"><img src="pic\community.png" style="width:50% "></div>
      <div class="menu-items-exp text-center"style="height:40%"><a href="main.html">재료별</a></div>
    </div>
    <div class="menu-items"style="width:20%;">
        <div class="menu-items-pic text-center" style="height:60%"><img src="pic\my_page.png" style="width:30% "></div>
        <div class="menu-items-exp text-center"style="height:40%"><a href="main.html">방법별</a></div>
    </div>
    <div class="menu-items"style="width:20%;">
      <div class="menu-items-pic1 text-center" style="height:60%"><img src="pic\statistic.png" style="width:30%; padding-top:-5px; "></div>
      <div class="menu-items-exp text-center"style="height:40%"><a href="main.html">통계</a></div>
    </div>
  </div>
   </div>
 </div>
 <!-- 재료선택 -->
 <div class="container Kind_recipe">
   <div class="Kind_recipe_menu">
     <script>
     let flag=new Array(80);
     let selecteding = new Array(3);
     let cnt = 0;
      let result="";
    for(let i=0; i<80; i++){flag[i]=0;}
     function select(idx){
       let ingredient = document.getElementsByClassName('ingrdients')[idx].innerHTML;

       if(flag[idx]==0){
         if(cnt>2){
           alert("최대 3개까지 선택가능합니다.");
           return 0;
         }
         document.getElementsByClassName('recipe_kind_item_')[idx].style.backgroundColor="yellow";
         flag[idx]=1;
         selecteding[cnt] = ingredient;
         cnt++;
       }
       else{
        document.getElementsByClassName('recipe_kind_item_')[idx].style.backgroundColor="white";
        flag[idx]=0;
        cnt--;
       }
     }
     function ingredientselect(){
       if(cnt==0){
         alert("재료를 선택해주세요!");
       }
       else {

         for(let i=0; i<80;i++){
           if(flag[i]==1){
              result += document.getElementsByClassName('ingrdients')[i].innerHTML;
              result +="|";

           }
         }
        result=result.slice(0,-1);
         alert(result);
         location.href="Recipe"+"ing"+result;
       }
     }
      index.map(function(v,i){
        document.write(`<div class="recipe_kind_item_" onclick="select('${i}')">`);
        document.write('<div class="kind-item_info">');
        document.write('<h2 style="margin-top:6px;" class="ingrdients">'+v['name']+'</h2>');
        document.write('</div>');
        document.write('</div>');
      });
      document.write(`<div class="mix">`);
      document.write(`<button type="button" class="mix_button" onclick="ingredientselect()">`);
      document.write(`선택 완료`);
      document.write(`</button>`);
      document.write(`</div>`)
      document.write('</div>');
      document.write('<div class="container bg3-1" id ="index" style="padding:0px">');
      document.write('</div>');
      </script>
   </div>
 <!-- 레시피 출력형태 변경 -->
      <div class="container bg3-1" id ="Recipe_list" style="padding:0px">
        <div class="container" id="list_btn">
          <a href="/Recipe"><span class="glyphicon glyphicon-th-large"></span></a>
          <a href="/recipe-grid"><span class="glyphicon glyphicon-th-list"></span></a>
        </div>
        <div class="container" id="Recipe_items">

 <!-- 레시피 출력 -->
          <script>
          var path_name = window.location.pathname;
          var length = path_name.length;
          var input=  path_name.substring(7,length);
          var code = new Array(5000);
          var cnt2=0;
          var a = info.length/60;
          var b = info.map.length % 60;
          if(isNaN(input)){
            var temp = decodeURI(input).substring(3, decodeURI(input).length);
            var ing = temp.split("|");
            material.map(function(v,i){
              for(var i=0; i<3;i++){
                if(ing[i]==null) break;
                if(v['Material_name']==ing[i]){
                  code[cnt2++]=v['recipe_code'];
                }
              }
            });
            info.map(function(v,i){
              for(var i=0;i<cnt2;i++){
                  if(v['recipe_code']==code[i]){
                    document.write(`<div class="Recipe_item" onclick="location.href='recipe_enter${v['recipe_code']}'">`);
                    document.write('<div class="Recipe_img"><img class="img-responsive food_img" src="'+v['imge_url']+'"></div>');
                    document.write('<div class="Recipe_info">');
                    document.write('<h2>'+v['recipe_name']+'</h2>');
                    document.write('<p>'+v['recipe_intro']+' </p>');
                    document.write('</div>');
                    document.write('</div>');
                  }

              }

            });
          }
          else{
            info.map(function(v,i){
              if(i>=(input-1)*60&&i<input*60){
                document.write(`<div class="Recipe_item" onclick="location.href='recipe_enter${v['recipe_code']}'">`);
                document.write('<div class="Recipe_img"><img class="img-responsive food_img" src="'+v['imge_url']+'"></div>');
                document.write('<div class="Recipe_info">');
                document.write('<h2>'+v['recipe_name']+'</h2>');
                document.write('<p>'+v['recipe_intro']+' </p>');
                document.write('</div>');
                document.write('</div>');
              }
              else if(input==0&&i>=0&&i<60) {
                document.write(`<div class="Recipe_item" onclick="location.href='recipe_enter${v['recipe_code']}'">`);
                document.write('<div class="Recipe_img"><img class="img-responsive food_img" src="'+v['imge_url']+'"></div>');
                document.write('<div class="Recipe_info">');
                document.write('<h2>'+v['recipe_name']+'</h2>');
                document.write('<p>'+v['recipe_intro']+' </p>');
                document.write('</div>');
                document.write('</div>');
              }
              })
            document.write('</div>')
            document.write('<div class="container bg3-1" id ="index" style="padding:0px">')
            if(b==0){
              for(var i=1;i<=a;i++){
                document.write('<a href="Recipe'+i+'" id="index">'+i+'</a>');
              }
            }
            else {
              for(var i=1;i<=a+1;i++){
                document.write('<a href="Recipe'+i+'" id="index">'+i+'</a>');
              }
            }
            document.write('</div>');
          }

          </script>
      </div>
    </script>
  </body>
</html>
